# 修正・実装予定の一覧

## 0.3.0
* セルの設計を変更。線を再設計。点の追加、点の削除、点の移動と線の変形を再設計
* セルの追加時の線の置き換えを廃止、編集セルを廃止。インディケーション時に前後表示、接合表示
* マテリアルのコピーによるバインドを廃止、クリックでマテリアルを選択

## Line
*「最後の線に適用するコマンド」をすべて「最も近い線に適用するコマンド」に変更する
* ストロークの品質の向上（アニメーション補間を使用）  
* 着色線の導入（原画時に簡単に塗り分けるための、線を着色線化するコマンドの導入。着色線は囲み消しの範囲と同等）
* ポリゴン化によるGPU描画（曲率が高い部分では分割数を増やし、低い部分では分割数を減らす） 

## Material
* マテリアルアニメーション
* コントラストなどのカラー編集
* アルファチェーン（連続する同じアルファのセル同士を同一の平面として描画）
* 擬似的なセルの法線ベクトルの導入
* アナログ風の透過光
* マクロ式のライト
* アクションの保存（変形情報などをセルに埋め込む）

## Cell
* セルのグループ間移動
* 複数セルの重なり判定（複数のセルの上からセルを追加するときにもcontains判定が有効なように修正）
* セル編集時のキーフレーム分割廃止（Drawingと同じように前のキーフレームのセルを編集）
* 前後表示にセルも含める
* セルに文字をペースト
* セルに画像をペースト
* セルの結合（Unionコマンド追加）
* 小さなセルを選択しやすくする
* 重なっているセル同士の区別をつけたクリップコマンド（親子表示またはアニメーション表示をする）
* セルの間のアンチエイリアスで生じる隙間埋め（スーパーサンプリングなどを利用。描画エンジンの変更必須）
* セルを選択していない時のMaterialViewを背景として定義
* 高さ優先の囲み消し（セルの後ろに隠れた線も選択してしまう問題の修正）
* セルグループ
* セルへの操作の履歴を別のセルに適用するコマンド
* 同一色の重なり順飛ばし
* 自動回転補間
* 「変形」の再設計（三次元変形などを導入し、枠を使った変形にする）
* Z移動とクリップを統合

## Camera
* 前後カメラ表示
* カメラと変形の統合
* 「揺れ」の振動数の設定

## Text
* TextViewを完成させる（タイムラインのスクロール設計と同等）
* 口パク連動
* モードレス・テキスト入力（すべての状態において、キー入力を受け付ける。コマンドとの衝突が問題）

## Group
* グループごとの線の色
* グループ選択による選択結合
* グループの半透明表示を廃止して、完成表示の上から選択グループを半透明着色する（描画の高速化が必要）
* グループの最終キーフレームの時間問題
* ループを再設計
* イージングを再設計（キーフレームではなく、セルやカメラに直接設定）

## Timeline
* キーフレームの複数選択
* タイムラインにキーフレーム・プロパティを統合
* アニメーション描画（表示が離散的な1フレーム単位または1グループ単位のため）
* キーフレームスナップスクロール
* 常に時間移動するトラックパッド上部スクロール
* カットのサムネイル導入（タイムラインを縮小するとサムネイル表示になるように設計）
* カット分割設計（カットもキーフレームのように分割するように設計。対になる接合アクションが必要）

## PlayView
* PlayView（再生中のとき、isPlayingでの分岐を廃止してCutViewの上にPlayViewを配置）
* 再生ビューの分離（同時作業を可能にする）
* 再生中のタイムライン表示更新
* 再生中の時間移動
* 遅延をなくす

## Command
* コマンドハイライト、無効コマンドの編集無効表示
* 表示範囲内でのコマンド適用
* ショートカットキー変更可能化
* 頻度の少ないコマンドをボタンまたはプルダウンボタン化
* コマンドのモードレス性の向上（コピー・ペースト対応の範囲を拡大など）

## Scene
* サイズとフレームレートの自由化
* 書き出しの種類を増やす
* DCI-P3色空間
* リニアワークフロー（移行した場合、「スクリーン」は「発光」に統合）

## GUI
* クローン実装
* Union選択（選択の結合を明示的に行う）
* コピーオブジェクト表示
* コピーUndo
* パネルにindication表示を付ける
* カーソルが離れると閉じるプルダウンボタン
* スロー操作時の値の変更を相対的にする
* ラジオボタンの導入
* ボタンの可視性の改善
* スクロールの可視性の改善・位置表示（元の位置までの距離などを表示）
* ペン入力デバイスでのクリック選択を廃止、トラックパッドでのドラッグを「移動」アクションに割り当て
* トラックパッドの環境設定を無効化または表示反映
* 書き出し時間表示の精度を改善
* ファイルシステムのモードレス化
* 音楽（シーケンサー付き）・効果音

## Source code
* Swift4への対応
* 汎用性、モードレス性に基づいたオブジェクト設計（ある特定の処理のためだけに設計したオブジェクトをすべて排除する）
* 描画高速化（GPUを積極活用するように再設計する。Metal APIを利用）
* CutViewのCutを不変にしてCutViewを時間に合わせて入れ替える
* SceneView関連の時間Undo未実装
* カット単位での読み込み
* 安全性の高いデータベース設計（保存が途中で中断された場合に、マテリアルの保存が部分的に行われていない状態になる）
* 強制アンラップの抑制
* guard文
* CALayerのdrawsAsynchronouslyのメモリリーク修正（GPU描画に変更）
* SceneViewDelegate実装（viewのカプセル化を強化）
* モデルのカプセル化を強化
* 保存高速化
* 安全なシリアライズ（NSObject, NSCodingを取り除く。Swift4のCodableを使用）
* Collectionプロトコル（allCellsやallBeziers、allEditPointsなどに適用）
* privateを少なくし、関数のネストなどを増やす
* TextViewとStringViewの統合
* TimelineViewなどをリファクタリングする
* ProtocolなView
* 永続データ構造に近づける
* Main.storyboard, Localizable.strings, Assets.xcassetsの廃止
* Cocoa脱却
